<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>JsIntroLab</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mocha/3.2.0/mocha.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mocha/3.2.0/mocha.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chai/3.5.0/chai.js"></script>

  <script>
    // initialize mocha
    mocha.setup('bdd');
    // chai has a lot of stuff, let's make assert global
    let assert = chai.assert;

  </script>

<script>
    
  describe("sum", function () {
    it("Expected output of sum([1,2,3,4]) is 10",
      function () {
        assert.equal(10, sum([1, 2, 3, 4]));
      });
    it("Expected output of sum() is 0",
      function () {
        assert.equal(0, sum());
      });
    it("Expected output of sum() is 0",
      function () {
        assert.equal(0, sum([]));
      });
  });

  describe("multiply", function () {
    it("Expected output of multiply([1,2,3,4]) is 24",
      function () {
        assert.equal(24, multiply([1, 2, 3, 4]));
      });
    it("Expected output of multiply([1,2,3,4,0]) is 0 ",
      function () {
        assert.equal(0, multiply([1,2,3,4,0]));
      });
    it("Expected output of multiply() is 0",
      function () {
        assert.equal(0, multiply());
      });
    it("Expected output of multiply([]) is 0",
      function () {
        assert.equal(0, multiply([]));
      });
  });

  describe("reverse", function () {
    it("Expected output of reverse('jag testar') is 'ratset gaj'",
      function () {
        assert.equal('ratset gaj', reverse('jag testar'));
      });
    it("Expected output of reverse('narT nauL aB') is 'Ba Luan Tran'",
      function () {
        assert.equal('Ba Luan Tran', reverse('narT nauL aB'));
      });

  });

  describe("filterLongWords", function () {
    it("Expected output of filterLongWords(null, 3) is []",
      function () {
        assert.deepEqual([], filterLongWords(null, 3));
      });
    it("Expected output of filterLongWords([], 3) is []",
      function () {
        assert.deepEqual([], filterLongWords([], 3));
      });
    it("Expected output of filterLongWords('test', 3) is []",
      function () {
        assert.deepEqual([], filterLongWords('test', 3));
      });
    it("Expected output of filterLongWords(['my', 'name', 'is', 'Ba', 'Luan', 'Tran'], 3) is ['name', 'Luan', 'Tran'], 3)",
      function () {
        assert.deepEqual(['name', 'Luan', 'Tran'], filterLongWords(['my', 'name', 'is', 'Ba', 'Luan', 'Tran'], 3));
      });
    it("Expected output of filterLongWords(['my', 'name', 'is', 'Ba', 'Luan', 'Tran'], 1)) is ['my', 'name', 'is', 'Ba', 'Luan', 'Tran'] ",
      function () {
        assert.deepEqual(['my', 'name', 'is', 'Ba', 'Luan', 'Tran'], filterLongWords(['my', 'name', 'is', 'Ba', 'Luan', 'Tran'], 1));
      });
      
  });

</script>

  <script>

    /* runs test to see if expected argument is === to value returned by function2test argument */
    function myFunctionTest(expected, found) {
      if ((expected === found) || (Array.isArray(expected) && Array.isArray(found) && JSON.stringify(expected) === JSON.stringify(found))) {
        return "TEST SUCCEEDED";
      } else {
        return "TEST FAILED.  Expected " + expected + " found " + found;
      }
    }

    /* max returns the maximum of 2 arguments */
    function max(a, b) {
      if (a > b) {
        return a;
      } else {
        return b;
      };
    }
    console.log("Expected output of max(20,10) is 20  " + myFunctionTest(20, max(20, 10)));

    /* max3 takes 3 numbers as arguments and returns the largest */
    function maxOfThree(a, b, c) {
      return max(max(a, b), c);

    }

    /* that takes a character (i.e. a string of length 1) and returns true if it is a vowel, false otherwise. */
    function isVowel(a) {
      if (!a || typeof a !== 'string' || a.length != 1) {
        return false;
      }
      return ['u', 'e', 'o', 'a', 'i'].some(function (s) {
        return s === a.toLocaleLowerCase()
      });
    }

    /* that sums (respectively) all the numbers in an array of numbers. For example, sum([1,2,3,4]) should return 10 */
    function sum(arr) {
      return !arr ? 0 : arr.reduce(function (a, b) {
        return a + b;
      }, 0);
    }

    /* that multiplies (respectively) all the numbers in an array of numbers. For example, multiply([1,2,3,4]) should return 24. */
    function multiply(arr) {
      return (!arr || !Array.isArray(arr) || arr.length == 0) ? 0 : arr.reduce(function (a, b) {
        return a * b;
      }, 1);
    }

    /* that computes the reversal of a string. For example, reverse("jag testar") should return the string "ratset gaj". */
    function reverse(text) {
      if (!text) {
        return text;
      }
      return text.split('').reverse().reduce(function(a, b) {
        return a + b;
      }, '');
    }

    /* that takes an array of words and returns the length of the longest one. */
    function findLongestWord(arr) {
      if (!arr || arr.length == 0) {
        return 0;
      }
      let longestWord = arr[0].length;

      for (let i=0 ; i < arr.length - 1; i++) {
        if (arr[i].length < arr[i+1].length) {
          longestWord = arr[i+1].length;
        }
      }

      return longestWord;
    }

    /* that takes an array of words and an integer i and returns the array of words that are longer than i. */
    function filterLongWords(arr, i) {
      if (!arr || !Array.isArray(arr) || arr.length == 0) {
        return [];
      }

      if (i < 0) {
        return arr;
      }

      return arr.filter(function (a) {
        return a.length > i;
      });
    }

    /* Modify the jsfiddle on the map/filter/reduce slide ( https://jsfiddle.net/keithlevi/e6kqvx2f/9/ ) as follows:
        a) multiply each element by 10; 
        b) return array with all elements equal to 3; 
        c) return the product of all elements;
    */
    function modifyJsfiddle() {
      const a = [1,3,5,3,3]; 
      const b = a.map(function(elem, i, array) {
        return elem * 10;
      });
      console.log("Modify the jsfiddle on the map/filter/reduce slide ( https://jsfiddle.net/keithlevi/e6kqvx2f/9/ ) as follows:");
      console.log("a) multiply each element by 10: " + b.toString());

      const c = a.filter(function(elem, i, array){
        return elem === 3;
      });
      console.log("b) return array with all elements equal to 3: " + c.toString());

      console.log("c) return the product of all elements: " + a.toString());
    }

    console.log("Expected output of max(10,90) is 90  " + myFunctionTest(90, max(10, 90)));
    console.log("Expected output of max('123456',90) is 123456  " + myFunctionTest('123456', max("123456", 90)));
    console.log("Expected output of max('123456a',90) is 90  " + myFunctionTest(90, max("123456a", 90)));

    console.log("Expected output of maxOfThree(5,4,44) is 44  " + myFunctionTest(44, maxOfThree(5, 4, 44)));
    console.log("Expected output of maxOfThree(55,4,44) is 55  " + myFunctionTest(55, maxOfThree(55, 4, 44)));

    console.log("Expected output of isVowel('a') is true  " + myFunctionTest(true, isVowel('a')));
    console.log("Expected output of isVowel('b') is false  " + myFunctionTest(false, isVowel('b')));
    console.log("Expected output of isVowel('abc') is false  " + myFunctionTest(false, isVowel('abc')));
    console.log("Expected output of isVowel() is false  " + myFunctionTest(false, isVowel()));
    console.log("Expected output of isVowel(null) is false  " + myFunctionTest(false, isVowel(null)));
    console.log("Expected output of isVowel(1) is false  " + myFunctionTest(false, isVowel(1)));

    console.log("Expected output of sum([1,2,3,4]) is 10  " + myFunctionTest(10, sum([1, 2, 3, 4])));
    console.log("Expected output of sum() is 0  " + myFunctionTest(0, sum()));
    console.log("Expected output of sum([]) is 0  " + myFunctionTest(0, sum([])));

    console.log("Expected output of multiply([1,2,3,4]) is 24  " + myFunctionTest(24, multiply([1, 2, 3, 4])));
    console.log("Expected output of multiply([1,2,3,4,0]) is 0  " + myFunctionTest(0, multiply([0, 1, 2, 3, 4])));
    console.log("Expected output of multiply() is 0  " + myFunctionTest(0, multiply()));
    console.log("Expected output of multiply([]) is 0  " + myFunctionTest(0, multiply([])));

    console.log("Expected output of reverse('jag testar') is 'ratset gaj'  " + myFunctionTest('ratset gaj', reverse('jag testar')));

    console.log("Expected output of findLongestWord(['qwert', 'asd', 'poiu', 'dfghjjj', 'q']) is 4  " + myFunctionTest(4, findLongestWord(['my', 'name', 'is', 'Ba', 'Luan', 'Tran'])));
    console.log("Expected output of findLongestWord([]) is 0  " + myFunctionTest(0, findLongestWord([])));
    console.log("Expected output of findLongestWord() is 0  " + myFunctionTest(0, findLongestWord()));

    console.log("Expected output of filterLongWords(null, 3) is []  " + myFunctionTest([], filterLongWords(null, 3)));
    console.log("Expected output of filterLongWords([], 3) is []  " + myFunctionTest([], filterLongWords([], 3)));
    console.log("Expected output of filterLongWords('test', 3) is []  " + myFunctionTest([], filterLongWords('test', 3)));
    console.log("Expected output of filterLongWords(['my', 'name', 'is', 'Ba', 'Luan', 'Tran'], 3) is ['name', 'Luan', 'Tran']  " 
      + myFunctionTest(['name', 'Luan', 'Tran'], filterLongWords(['my', 'name', 'is', 'Ba', 'Luan', 'Tran'], 3)));
    console.log("Expected output of filterLongWords(['my', 'name', 'is', 'Ba', 'Luan', 'Tran'], 1)) is ['my', 'name', 'is', 'Ba', 'Luan', 'Tran']  " 
      + myFunctionTest(['my', 'name', 'is', 'Ba', 'Luan', 'Tran'], filterLongWords(['my', 'name', 'is', 'Ba', 'Luan', 'Tran'], 1)));

    modifyJsfiddle();
  </script>
</head>

<body>
  <div id="mocha"></div>
  <script>
    mocha.run();
  </script>
  Look in the Chrome developer console to see the output. CTRL_SHIFT_J <br />
  Or on Firefox with CTRL_SHIFT_K

</body>

</html>